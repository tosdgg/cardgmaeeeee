<!DOCTYPE html><html lang="zh-TW">
    <head>
    <meta charset="UTF-8">
    <title>Steampunk Duelist v7.0 - Tactics & Status</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=IM+Fell+English+SC&family=Rye&display=swap" rel="stylesheet">
    <style>
        :root {
            --brass: #b5a642; --bronze: #cd7f32; --gold: #ffd700;
            --leather: #4a3c31; --parchment: #eaddcf; --steam-blue: #00f3ff;
            --danger: #ff4444; --success: #44ff44; --shield: #00aaff; --poison: #bf00ff;
        }

        body {
            margin: 0; padding: 0; background: #120f0d;
            color: var(--parchment); font-family: 'IM Fell English SC', serif;
            overflow: hidden; height: 100vh; user-select: none;
            background-image: radial-gradient(circle, #2a221b 0%, #120f0d 100%);
        }

        /* --- Êà∞È¨•‰ΩàÂ±Ä --- */
        #battle-stage {
            position: absolute; top: 40px; left: 50%; transform: translateX(-50%);
            display: flex; align-items: center; gap: 40px;
        }

        .round-gauge {
            width: 80px; height: 100px; background: var(--leather); border: 3px double var(--brass);
            border-radius: 10px; display: flex; flex-direction: column; align-items: center; justify-content: center;
        }

        /* Êïµ‰∫∫ÂçÄÂ°ä */
        .enemy-box {
            width: 420px; background: #222; border: 6px ridge var(--bronze);
            padding: 25px; border-radius: 5px; position: relative; cursor: pointer; transition: 0.3s;
        }
        .tier-1 { border-color: #cd7f32 !important; }
        .tier-2 { border-color: #c0c0c0 !important; box-shadow: 0 0 20px rgba(192,192,192,0.3); }
        .tier-3 { border-color: #ffd700 !important; box-shadow: 0 0 35px rgba(255,215,0,0.5); }
        
        .target-active { outline: 3px solid var(--steam-blue); box-shadow: 0 0 30px var(--steam-blue); }

        /* --- ÁãÄÊÖãÈ°ØÁ§∫ (Shield/Poison) --- */
        .status-icon {
            display: inline-flex; align-items: center; justify-content: center;
            padding: 2px 8px; border-radius: 10px; font-weight: bold; font-family: sans-serif;
            font-size: 0.9rem; margin-right: 5px; box-shadow: 1px 1px 3px #000;
        }
        .status-shield { background: var(--shield); color: #fff; border: 1px solid #fff; }
        .status-poison { background: var(--poison); color: #fff; border: 1px solid #e0e; }

        /* --- Â∑¶ÂÅ¥ÂÑÄË°®Êùø --- */
        #side-panel { position: absolute; left: 30px; top: 50%; transform: translateY(-50%); display: flex; flex-direction: column; gap: 20px; }
        .gauge-circle { width: 100px; height: 100px; border: 4px solid var(--brass); border-radius: 50%; background: radial-gradient(circle, var(--leather), #111); display: flex; flex-direction: column; align-items: center; justify-content: center; }

        /* --- Âç°Áâå --- */
        #hand-area { position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); width: 90%; height: 260px; display: flex; justify-content: center; align-items: flex-end; perspective: 1000px; pointer-events: none; }
        .card { 
            width: 160px; height: 230px; background: var(--parchment); color: #2a1a0a; 
            border: 5px solid var(--bronze); border-radius: 12px; margin: 0 -15px; 
            cursor: pointer; position: relative; transition: 0.25s; 
            background-image: url('https://www.transparenttextures.com/patterns/pinstriped-suit.png');
            pointer-events: auto; box-shadow: -5px 5px 15px rgba(0,0,0,0.5);
        }
        .card:hover { transform: translateY(-30px) rotate(0deg) !important; z-index: 100; margin: 0 5px; }
        .card.selected { transform: translateY(-70px) scale(1.1) !important; border-color: var(--steam-blue); box-shadow: 0 0 30px var(--steam-blue); z-index: 200; }
        
        .card-cost { position: absolute; top: -15px; left: -15px; width: 40px; height: 40px; background: #222; color: var(--steam-blue); border: 2px solid var(--steam-blue); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-family: 'Rye'; font-size: 1.4rem; z-index: 2; }
        .card-name { padding:15px 5px; text-align:center; font-family:'Rye'; font-size:1.0rem; border-bottom:2px solid #aaa; line-height: 1.1; font-weight: bold; }
        .card-desc { margin-top: 20px; text-align: center; font-size: 0.9rem; color: #421; padding: 0 10px; line-height: 1.4; font-weight: bold;}
        
        /* Ê®ôÁ±§Ë¶ñË¶∫Âåñ */
        .tag-badge { display: inline-block; padding: 2px 4px; border-radius: 4px; font-size: 0.8rem; margin: 2px; color: #fff; }
        .bg-dmg { background: #aa4444; }
        .bg-def { background: #0088cc; }
        .bg-heal { background: #44aa44; }
        .bg-psn { background: #8800cc; }
        .bg-eng { background: #ccaa00; }
        .bg-draw { background: #555; }
        .bg-sdmg { background: #550000; border: 1px dashed #f00; }

        /* --- Ë°ÄÈáèËàáË®äÊÅØ --- */
        .hp-container { width: 100%; height: 22px; background: #000; border-radius: 11px; border: 2px solid var(--brass); overflow: hidden; margin: 10px 0; position: relative; }
        .hp-fill { height: 100%; width: 100%; transition: 0.4s; position: absolute; left: 0; top: 0; }
        .shield-fill { height: 100%; width: 0%; background: var(--shield); opacity: 0.6; position: absolute; left: 0; top: 0; transition: 0.4s; z-index: 2;}

        #player-hub { position: absolute; bottom: 320px; left: 50%; transform: translateX(-50%); width: 450px; cursor: pointer; padding: 10px; border-radius: 10px; transition: 0.2s; }
        #action-log { position: absolute; top: 120px; width: 100%; text-align: center; color: #fff; font-family: 'Rye'; text-shadow: 0 0 5px #000; pointer-events: none; z-index: 500; font-size: 1.5rem; }

        #end-btn { position: absolute; right: 40px; top: 50%; transform: translateY(-50%); width: 110px; height: 110px; border-radius: 50%; background: var(--bronze); border: 6px double var(--brass); color: #fff; font-family: 'Rye'; cursor: pointer; box-shadow: 0 5px 15px #000; transition: 0.2s; }
        #end-btn:hover { background: #b87333; transform: translateY(-50%) scale(1.05); }
    </style></head><body>

    <div id="action-log"></div>

    <div id="battle-stage">
        <div class="round-gauge">
            <span style="font-size:0.7rem">ROUND</span>
            <span id="ui-round" style="font-family:'Rye'; font-size:2.2rem; color:var(--gold)">1</span>
        </div>
        <div class="enemy-box tier-1" id="enemy-target">
            <div id="ui-en-row" style="font-size:0.7rem; color: #888;">#--</div>
            <div id="ui-en-name" style="font-family:'Rye'; font-size:1.8rem;">LOADING...</div>
            
            <div style="display:flex; gap:5px; height: 20px;">
                <div id="ui-en-poison" class="status-icon status-poison" style="display:none">‚ò† 0</div>
            </div>

            <div class="hp-container">
                <div id="ui-en-hp-fill" class="hp-fill" style="background: var(--danger);"></div>
            </div>
            <div id="ui-en-hp-text" style="text-align:right; font-weight:bold; font-size: 0.9rem;">-- / --</div>
            <div id="ui-en-intent" style="color:var(--steam-blue); font-size:0.8rem; margin-top:5px; height:1rem;"></div>
        </div>
    </div>

    <div id="side-panel">
        <div class="gauge-circle">
            <span style="font-size:0.7rem">ENERGY</span>
            <span id="ui-energy" style="font-family:'Rye'; font-size:2rem; color:var(--steam-blue)">3/3</span>
        </div>
        <div class="gauge-circle">
            <span style="font-size:0.7rem">WAVE</span>
            <span id="ui-wave-left" style="font-family:'Rye'; font-size:2rem">--</span>
        </div>
    </div>

    <div id="player-hub">
        <div style="display:flex; justify-content:space-between; margin-bottom: 5px;">
            <span>PLAYER_CORE</span>
            <span id="ui-pl-hp-text">100 / 100</span>
        </div>
        <div style="display:flex; gap:5px; margin-bottom:5px;">
            <div id="ui-pl-shield" class="status-icon status-shield" style="display:none">üõ° 0</div>
        </div>
        <div class="hp-container">
            <div id="ui-pl-hp-fill" class="hp-fill" style="background: var(--success);"></div>
            <div id="ui-pl-shield-fill" class="shield-fill"></div>
        </div>
    </div>

    <button id="end-btn">END<br>TURN</button>
    <div id="hand-area"></div>

    <script>
        const BASE_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vRuNEG1oT6a0JsP4Zy8uqFSRDKaxEM8FJetpMWOZ0vR6yg4AGqGtMlLJ_0NSxIE_tqSnOsPd9aLWtg8/pub?output=csv";
        const GID_CARD = "0";
        const GID_ENEMY = "322780304";
        const GID_CONFIG = "1319509950";

        let state = {
            playerHP: 100, playerMaxHP: 100,
            playerShield: 0, 
            energy: 3, maxEnergy: 3,
            round: 1,
            cardPool: [], enemyPool: [], waveConfig: [],
            currentWave: [], currentEnemy: null, enemyWaveIdx: 0,
            selectedCard: null
        };

        // Ê®°Êì¨Êñ∞Âç°Áâå (Âú® CSV Êú™Êõ¥Êñ∞ÂâçÊ∏¨Ë©¶Áî®)
        const DEMO_CARDS = [
            { name: "Iron Plating", effect: "[#def 15]", cost: 1, row: 99 },
            { name: "Poison Dart", effect: "[#dmg 5] [#psn 3]", cost: 1, row: 99 },
            { name: "Overclock", effect: "[#eng 2] [#sdmg 5]", cost: 0, row: 99 },
            { name: "Supply Drop", effect: "[#draw 2]", cost: 1, row: 99 },
            { name: "Shield Bash", effect: "[#def 10] [#dmg 10]", cost: 2, row: 99 }
        ];

        async function init() {
            Papa.parse(`${BASE_URL}&gid=${GID_CARD}`, { download: true, header: false, complete: (res) => {
                state.cardPool = res.data.slice(1).filter(r => r[0]).map((r,i)=>({
                    name: r[0], effect: r[1], cost: parseInt(r[2])||0, row: i+2
                }));
                // ‚òÖ Âêà‰ΩµÊ∏¨Ë©¶Âç°Áâå
                state.cardPool = [...state.cardPool, ...DEMO_CARDS];
                draw(5);
            }});

            Papa.parse(`${BASE_URL}&gid=${GID_ENEMY}`, { download: true, header: false, complete: (res) => {
                state.enemyPool = res.data.slice(1).filter(r => r[0]).map((r,i)=>({ 
                    name: r[0], hp: parseInt(r[1])||10, type: parseInt(r[2])||1, 
                    actions: [r[4], r[5], r[6], r[7], r[8], r[9]].filter(a => a && a.trim() !== ""), 
                    row: i+2 
                }));
                
                Papa.parse(`${BASE_URL}&gid=${GID_CONFIG}`, { download: true, header: false, complete: (res) => {
                    state.waveConfig = res.data.slice(1).map(r => ({
                        n: parseInt(r[0])||0, e: parseInt(r[1])||0, b: parseInt(r[2])||0
                    }));
                    generateWave();
                }});
            }});
        }

        function generateWave() {
            const cfg = state.waveConfig[state.round - 1];
            if(!cfg) return alert("Victory!");
            let wave = [];
            const add = (type, count) => {
                const p = state.enemyPool.filter(en => en.type === type);
                for(let i=0; i<count; i++) if(p.length) wave.push({...p[Math.floor(Math.random()*p.length)]});
            };
            add(1, cfg.n); add(2, cfg.e); add(3, cfg.b);
            state.currentWave = wave;
            state.enemyWaveIdx = 0;
            spawnNext();
        }

        function spawnNext() {
            if(state.enemyWaveIdx < state.currentWave.length) {
                const raw = state.currentWave[state.enemyWaveIdx];
                // Âä†ÂÖ• poison ÁãÄÊÖãÂ±¨ÊÄß
                state.currentEnemy = { ...raw, curHP: raw.hp, actionStep: 0, poison: 0 };
                state.enemyWaveIdx++;
                
                const box = document.getElementById('enemy-target');
                box.className = 'enemy-box tier-' + state.currentEnemy.type;
                updateUI();
            } else {
                state.round++;
                generateWave();
            }
        }

        function draw(n) {
            const area = document.getElementById('hand-area');
            for(let i=0; i<n; i++){
                const d = state.cardPool[Math.floor(Math.random()*state.cardPool.length)];
                if(!d) continue;
                const el = document.createElement('div');
                el.className = 'card';
                
                // ‚òÖ ÈÄôË£°ÈÄ≤Ë°åÊ®ôÁ±§ÁæéÂåñËΩâÊèõ
                let niceDesc = d.effect;
                niceDesc = niceDesc.replace(/\[#dmg\s+(\d+)\]/g, '<span class="tag-badge bg-dmg">DMG $1</span>');
                niceDesc = niceDesc.replace(/\[#def\s+(\d+)\]/g, '<span class="tag-badge bg-def">DEF $1</span>');
                niceDesc = niceDesc.replace(/\[#heal\s+(\d+)\]/g, '<span class="tag-badge bg-heal">HEAL $1</span>');
                niceDesc = niceDesc.replace(/\[#psn\s+(\d+)\]/g, '<span class="tag-badge bg-psn">PSN $1</span>');
                niceDesc = niceDesc.replace(/\[#eng\s+(\d+)\]/g, '<span class="tag-badge bg-eng">ENG +$1</span>');
                niceDesc = niceDesc.replace(/\[#draw\s+(\d+)\]/g, '<span class="tag-badge bg-draw">DRAW $1</span>');
                niceDesc = niceDesc.replace(/\[#sdmg\s+(\d+)\]/g, '<span class="tag-badge bg-sdmg">HURT $1</span>');

                el.innerHTML = `
                    <div class="card-cost">${d.cost}</div>
                    <div class="card-name">${d.name}</div>
                    <div class="card-desc">${niceDesc}</div>
                `;
                
                // ËÆìÂç°ÁâáÊúâÈªûÈö®Ê©üÊóãËΩâÔºåÂ¢ûÂä†ÊâãÁâåÊÑü
                const rot = (Math.random() * 6 - 3).toFixed(1);
                el.style.transform = `rotate(${rot}deg)`;
                
                el.onclick = (e) => { 
                    e.stopPropagation(); 
                    if(state.energy >= d.cost) select(el, d); 
                };
                area.appendChild(el);
            }
        }

        function select(el, d) {
            if(state.selectedCard?.el === el) return cancel();
            cancel();
            state.selectedCard = {el, d};
            el.classList.add('selected');
            
            // Ê†πÊìöÂç°ÁâáÊïàÊûúÊ±∫ÂÆöÂèØ‰ª•ÈªûË™∞
            // Á∞°ÂñÆËµ∑Ë¶ãÔºåÂ¶ÇÊûúÂç°ÁâáÊúâ dmg/psn ‰∫ÆÊïµ‰∫∫ÔºåÊúâ heal/def/eng/draw ‰∫ÆÁé©ÂÆ∂
            const hasOffense = /\[#(dmg|psn)/.test(d.effect);
            if(hasOffense) document.getElementById('enemy-target').classList.add('target-active');
            
            const hasSelf = /\[#(heal|def|eng|draw|sdmg)/.test(d.effect);
            if(hasSelf) document.getElementById('player-hub').classList.add('target-active');
        }

        function cancel() {
            if(state.selectedCard) state.selectedCard.el.classList.remove('selected');
            state.selectedCard = null;
            document.querySelectorAll('.target-active').forEach(e => e.classList.remove('target-active'));
        }

        // Á∂ÅÂÆöÈªûÊìä‰∫ã‰ª∂
        document.getElementById('enemy-target').onclick = () => { if(state.selectedCard) applyCardEffect("enemy"); };
        document.getElementById('player-hub').onclick = () => { if(state.selectedCard) applyCardEffect("player"); };

        function applyCardEffect(target) {
            const d = state.selectedCard.d;
            
            // Á∞°ÂñÆÁöÑÈ©óË≠âÔºöÂ¶ÇÊûú‰Ω†ÈªûÊïµ‰∫∫Ôºå‰ΩÜÂç°ÁâáÂÖ®ÊòØË£úË°ÄÔºåÈÄôÊòØ‰∏çÂÖÅË®±ÁöÑ (ÈÄôË£°Êö´Á∞°ÂåñÔºåÂÖÅË®±Á©∫ÊèÆ)
            state.energy -= d.cost;

            const reg = /\[#(\w+)\s*(-?\d+)\]/g; 
            let m;
            while((m = reg.exec(d.effect)) !== null) {
                const tag = m[1], val = parseInt(m[2]);
                
                // --- Ê®ôÁ±§ÈÇèËºØÊ†∏ÂøÉ ---
                if(tag === 'dmg' && target === 'enemy') {
                    damageEnemy(val);
                }
                if(tag === 'psn' && target === 'enemy') {
                    state.currentEnemy.poison += val;
                    showLog(`POISON APPLIED: ${val}`);
                }
                if(tag === 'heal') {
                    state.playerHP = Math.min(state.playerMaxHP, state.playerHP + val);
                    showLog(`HEALED ${val}`);
                }
                if(tag === 'def') {
                    state.playerShield += val;
                    showLog(`SHIELD UP: ${val}`);
                }
                if(tag === 'eng') {
                    state.energy = Math.min(10, state.energy + val); // ‰∏äÈôêÊö´ÂÆö10
                    showLog(`ENERGY +${val}`);
                }
                if(tag === 'draw') {
                    draw(val);
                    showLog(`DRAW ${val}`);
                }
                if(tag === 'sdmg') {
                    // Ëá™ÊÆòÁÑ°Ë¶ñË≠∑Áõæ
                    state.playerHP -= val;
                    showLog(`SACRIFICED ${val} HP`);
                }
            }

            state.selectedCard.el.remove();
            cancel();
            checkWin();
            updateUI();
        }

        function damageEnemy(amt) {
            state.currentEnemy.curHP -= amt;
            showLog(`HIT ENEMY: ${amt}`);
            // Ë¶ñË¶∫ÈñÉÁàç
            const box = document.getElementById('enemy-target');
            box.style.filter = "brightness(2) sepia(1) hue-rotate(-50deg) saturate(5)";
            setTimeout(()=> box.style.filter = "", 100);
        }

        function checkWin() {
            if(state.currentEnemy && state.currentEnemy.curHP <= 0) {
                spawnNext();
            }
        }

        // --- Áé©ÂÆ∂ÂèóÂÇ∑ÈÇèËºØ (Âê´Ë≠∑Áõæ) ---
        function playerTakeDamage(amt) {
            let remain = amt;
            if(state.playerShield > 0) {
                if(state.playerShield >= remain) {
                    state.playerShield -= remain;
                    remain = 0;
                    showLog(`BLOCKED!`);
                } else {
                    remain -= state.playerShield;
                    state.playerShield = 0;
                }
            }
            if(remain > 0) {
                state.playerHP -= remain;
                showLog(`TOOK ${remain} DMG`);
                document.body.style.animation = "shake 0.3s"; // ÈúÄÂÆöÁæ© shake
            }
            updateUI();
        }

        // --- ÂõûÂêàÁµêÊùüÊµÅÁ®ã ---
        document.getElementById('end-btn').onclick = () => {
            // 1. Êïµ‰∫∫‰∏≠ÊØíÂÇ∑ÂÆ≥
            if(state.currentEnemy && state.currentEnemy.poison > 0) {
                const dmg = state.currentEnemy.poison;
                damageEnemy(dmg);
                state.currentEnemy.poison = Math.max(0, state.currentEnemy.poison - 1);
                showLog(`POISON TICK: ${dmg}`);
                if(state.currentEnemy.curHP <= 0) { 
                    spawnNext(); 
                    startPlayerTurn(); // Êïµ‰∫∫Ê≠ª‰∫ÜÂ∞±Áõ¥Êé•Ëº™Âà∞Áé©ÂÆ∂
                    return; 
                }
            }

            // 2. Êïµ‰∫∫Ë°åÂãï
            enemyAction();

            // 3. Ê∫ñÂÇô‰∏ãÂõûÂêà
            startPlayerTurn();
        };

        function enemyAction() {
            if(!state.currentEnemy) return;
            const acts = state.currentEnemy.actions;
            if(!acts.length) return;
            
            const currentAct = acts[state.currentEnemy.actionStep % acts.length];
            const reg = /\[#(\w+)\s*(-?\d+)\]/g; 
            let m;
            while((m = reg.exec(currentAct)) !== null) {
                const tag = m[1], val = parseInt(m[2]);
                if(tag === 'dmg') playerTakeDamage(val);
                // Êïµ‰∫∫‰πüÂèØ‰ª•Ë£úË°ÄÊàñÁµ¶Ëá™Â∑±Ë≠∑Áõæ (Â¶ÇÊûúÊúâÈúÄË¶ÅÊì¥ÂÖÖ)
            }
            state.currentEnemy.actionStep++;
        }

        function startPlayerTurn() {
            // ÈáçÁΩÆË≠∑Áõæ? (ÈÄöÂ∏∏Ê©üÂà∂ÊòØÂõûÂêàÈñãÂßãË≠∑ÁõæÊ≠∏Èõ∂ÔºåËã•Ë¶Å‰øùÁïôÂèØÁßªÈô§ÈÄôË°å)
            state.playerShield = 0; 
            
            state.energy = state.maxEnergy;
            draw(5); // Ë£úÁâå (Á∞°ÂñÆÁâàÔºöÁõ¥Êé•ÊäΩ5Âºµ)
            updateUI();
        }

        function showLog(msg) {
            const log = document.getElementById('action-log');
            log.innerText = msg;
            log.style.opacity = 1;
            log.style.transform = "translateY(-20px)";
            log.style.transition = "0s";
            
            setTimeout(()=>{
                log.style.transition = "1s";
                log.style.opacity = 0;
                log.style.transform = "translateY(0)";
            }, 800);
        }

        function updateUI() {
            // Enemy
            if(state.currentEnemy) {
                document.getElementById('ui-en-name').innerText = state.currentEnemy.name;
                document.getElementById('ui-en-row').innerText = `Row: ${state.currentEnemy.row}`;
                
                const enPct = (state.currentEnemy.curHP / state.currentEnemy.hp) * 100;
                document.getElementById('ui-en-hp-fill').style.width = Math.max(0, enPct) + '%';
                document.getElementById('ui-en-hp-text').innerText = `${state.currentEnemy.curHP} / ${state.currentEnemy.hp}`;
                
                // Poison UI
                const pUI = document.getElementById('ui-en-poison');
                if(state.currentEnemy.poison > 0) {
                    pUI.style.display = "flex";
                    pUI.innerText = `‚ò† ${state.currentEnemy.poison}`;
                } else {
                    pUI.style.display = "none";
                }

                // Intent
                const acts = state.currentEnemy.actions;
                if(acts.length) {
                    document.getElementById('ui-en-intent').innerText = `INTENT: ${acts[state.currentEnemy.actionStep % acts.length]}`;
                }
            }

            document.getElementById('ui-round').innerText = state.round;
            document.getElementById('ui-energy').innerText = `${state.energy}/${state.maxEnergy}`;
            document.getElementById('ui-wave-left').innerText = Math.max(0, state.currentWave.length - state.enemyWaveIdx);
            
            // Player
            document.getElementById('ui-pl-hp-text').innerText = `${state.playerHP} / ${state.playerMaxHP}`;
            document.getElementById('ui-pl-hp-fill').style.width = Math.max(0, (state.playerHP/state.playerMaxHP)*100) + '%';
            
            // Shield UI
            const sUI = document.getElementById('ui-pl-shield');
            const sFill = document.getElementById('ui-pl-shield-fill');
            if(state.playerShield > 0) {
                sUI.style.display = "flex";
                sUI.innerText = `üõ° ${state.playerShield}`;
                // Ë≠∑ÁõæÊ¢ùÁñäÂä†È°ØÁ§∫
                sFill.style.width = Math.min(100, (state.playerShield/state.playerMaxHP)*100) + '%';
            } else {
                sUI.style.display = "none";
                sFill.style.width = '0%';
            }

            if(state.playerHP <= 0) {
                alert("SYSTEM FAILURE. RELOAD.");
                location.reload();
            }
        }

        document.body.onclick = cancel;
        window.onload = init;
    </script>
    </body>
</html>
